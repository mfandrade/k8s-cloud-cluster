# About

This repo contains a sample implementation of GITOPS creating an
infrastrucuture on AWS via Terraform and provisioning a Kubernetes
cluster in AWS EC2, and still with a Wordpress deployment for 
validation.

# Requirements
- aws cli configured
- terraform
- ansible
- make

# TL;DR

```
$ cd terraform-ansible-aws
$ make
```

# Structure
```
.
|-- 1_terraform                   - Terraform artifacts
|   |-- Makefile
|   |-- inventory.ini.tpl
|   |-- main.tf
|   |-- outputs.tf                - artifact for generate Ansible inventory
|   |-- terraform.tfvars.example  - rename and change this file content
|   `-- vars.tf
|-- 2_ansible                     - Ansible playbooks
|   |-- 0-prepare.yaml
|   |-- 1-install.yaml
|   |-- 2-kubeadm-init.yaml
|   |-- 3-network-pod.yaml
|   |-- 4-join-command.yaml
|   `-- hosts.ini                  - inventory file (generated by Terraform)
|-- 3_kubernetes                   - Kubernetes objcts for cluster validation
|   |-- mysql-deployment.yaml
|   `-- wordpress-deployment.yaml
`-- README.md                      - this file
```
